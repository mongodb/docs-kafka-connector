.. _tutorial-migrate-time-series:
.. _kafka-tutorial-migrate-time-series:

==========================================================
Migrate an Existing Collection to a Time Series Collection
==========================================================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. procedure::
   :style: connected

   .. step:: Verify the Time Series Collection Data

      Once the sink connector completes processing the topic data, the
      ``StockDataMigrate`` time series collection should contain all the
      market data from your ``PriceData`` collection.

      To view the data in MongoDB, run the following command to connect to
      your replica set using ``mongosh``:

      .. code-block:: shell

         mongosh "mongodb://mongo1"

      At the prompt, type the following commands to retrieve all the
      documents in the ``Stocks.StockDataMigrate`` MongoDB namespace:

      .. code-block:: json

         use Stocks
         db.StockDataMigrate.find()

      You should see documents returned from the command that resemble the
      following document:

      .. code-block:: javascript
         :copyable: false

         {
           tx_time: 2021-07-12T20:05:35.000Z,
           symbol: 'WSV',
           company_name: 'WORRIED SNAKEBITE VENTURES',
           price: 21.22,
           _id: ObjectId("...")
         }

Summary
-------

In this tutorial, you created a stock ticker data generator that periodically
wrote data into a MongoDB collection.
You configured a source connector to copy the data into a Kafka topic and
configured a sink connector to write that data into a new MongoDB time
series collection.

Learn More
----------

Read the following resources to learn more about concepts mentioned in
this tutorial:

- :ref:`<sink-configuration-time-series>`
- :manual:`Time Series Collections </core/timeseries-collections/>`
